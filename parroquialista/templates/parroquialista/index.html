{% extends 'parroquialista/base.html'%}

{% block title%}
    Listado de Parroquias
{% endblock %}

{% block container%}
        <div id="mapa" class="capas"></div>
        <div id="datos" class="capas">
            <div id="data">
                Listado de Parroquia
                <ul>
                    {% for Parroquia in lista_parroquia %}
                        <li><a href='/lista/{{ Parroquia.id }}/'>{{ Parroquia.nombre }}</a></li>
                    {% endfor %}
                </ul>
            </div>
        </div>
{% endblock %}

{% block jsconnect%} 

<script type="text/javascript">

    //var obj = '{{my_obj | safe}}';

     var  myDjangoList = (("{{my_obj}}").replace(/&(l|g|quo)t;/g, function(a,b){
                return {
                    l   : '<',
                    g   : '>',
                    quo : '"'
                }[b];
            }));

    myDjangoList = myDjangoList.replace(/u'/g, '\'');
    myDjangoList = myDjangoList.replace(/'/g, '\"');
   
    var obj = JSON.parse( myDjangoList );



    function loadMarkers(map){
            for (var i=0;i<obj.length;i++){
                var point = new google.maps.LatLng(obj[i].latitud,obj[i].longitud);
                console.log(point);
                var marker = new google.maps.Marker({
                    position: point,
                    map: map,
                    draggable:false
                    });
            }
            
    }
    </script>

{% endblock %}
